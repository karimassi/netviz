"use strict";function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0,e=function(){};return{s:e,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){l=!0,n=t},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw n}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function arrayEquals(t,r){return Array.isArray(t)&&Array.isArray(r)&&t.length===r.length&&t.every(function(t,e){return t===r[e]})}var SimpleBarPlot=function(){function i(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:600,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:400,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:100;_classCallCheck(this,i),this.id=t,this.svg=d3.select("svg#".concat(t)),this.availableHeight=void 0,this.bars=void 0,this.barTexts=void 0,this.labels=void 0,this.initialized=!1,this.setup(r,a,e,n)}return _createClass(i,[{key:"updateLabels",value:function(t){if(this.initialized&&!arrayEquals(this.labels,t)){for(var e=d3.transition().duration(300),r=0;r<this.labelTexts.length;r++)13<t[r].length&&(t[r]=t[r].slice(0,13)+"..."),this.labelTexts[r].transition(e).style("opacity",0).transition().text(t[r]).transition(e).style("opacity",1);this.labels=t}}},{key:"updateData",value:function(a){var n=this;if(this.initialized){var t,e=1,r=_createForOfIteratorHelper(a);try{for(r.s();!(t=r.n()).done;)var i=t.value,e=Math.max(e,i)}catch(t){r.e(t)}finally{r.f()}for(var l=d3.scaleLinear().domain([0,e]).range([0,this.availableHeight]),o=0;o<a.length;o++)!function(t){var e=l(a[t]),r=d3.transition().duration(1e3);n.bars[t].transition(r).attr("y",-e).attr("height",e),n.barTexts[t].transition(r).attr("transform","translate(0 ".concat(-e,")")).tween("text",function(){var e=n.barTexts[t],r=d3.scaleLinear().domain([0,1]).range([+e.text(),a[t]]);return function(t){e.text(Math.round(r(t)))}})}(o)}}},{key:"setup",value:function(t,e,r,a){var n=t,t=e;this.svg.attr("viewBox","0 0 ".concat(n," ").concat(t)),this.availableHeight=t-80;function i(t){return 50+(.5+t)*(o+l)}var e=this.svg.append("g").attr("transform","translate(0 ".concat(t-40,")")),t=r.length,l=a,o=(n-100-t*l)/t,a=e.selectAll("rect.simple-plot-bars").data(r).enter().append("rect").attr("fill","#DB0000").attr("x",function(t,e){return i(e)-.5*l}).attr("y",0).attr("width",l).attr("height",0).attr("class","simple-plot-bars"),t=e.selectAll("text.bar-text").data(r).enter().append("text").attr("fill","white").attr("x",function(t,e){return i(e)}).attr("y",-13).attr("class","bar-text").style("font-size","1.8em").style("user-select","none").style("text-anchor","middle").text("0");this.bars=a._groups[0].map(function(t){return d3.select(t)}),this.barTexts=t._groups[0].map(function(t){return d3.select(t)}),e.append("line").attr("x1",50).attr("x2",n-50).attr("y1",0).attr("y2",0).attr("class","simple-plot-axis").attr("stroke","white");r=e.selectAll("text.label-text-simple-plot").data(r).enter().append("text").attr("fill","white").attr("y",10).attr("x",function(t,e){return i(e)}).attr("class","label-text-simple-plot").style("font-size","2em").style("user-select","none").style("text-anchor","middle").style("alignment-baseline","hanging").text(function(t){return t});this.labelTexts=r._groups[0].map(function(t){return d3.select(t)}),this.initialized=!0}}]),i}();
//# sourceMappingURL=simple-bar-plot.js.map
