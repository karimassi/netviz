"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}var BusiestMonthStackedBarPlot=function(){function e(t){_classCallCheck(this,e),this.svg=t,this.currentData={},this.MONTHS={},this.width=0,this.height=0,this.setup()}return _createClass(e,[{key:"xScale",value:function(){return d3.scaleBand().domain(this.MONTHS).range([0,this.width]).padding(.4)}},{key:"createXaxis",value:function(){var t=this.xScale(this.width);this.svg.append("g").attr("transform","translate(0,"+this.height+")").call(d3.axisBottom(t)).selectAll("text").style("text-anchor","middle").style("fill","whitesmoke").style("font-size","1.6em")}},{key:"yScale",value:function(){return d3.scaleLinear().domain([0,2500]).range([this.height,0])}},{key:"createYaxis",value:function(){var t=this.yScale(this.height);this.svg.append("g").attr("transform","translate(40,0)").call(d3.axisLeft(t).ticks(4)).selectAll("text").transition().duration(100).style("fill","whitesmoke").style("font-size","1.3em")}},{key:"createColorRange",value:function(){return d3.scaleOrdinal().domain(["Movies","TV Shows"]).range(["#DB0000","#623A63"])}},{key:"createStackedData",value:function(){var t=this.currentData.columns.slice(1);return d3.stack().keys(t)(this.currentData)}},{key:"createTooltips",value:function(){d3.select("div#busiest-month").style("opacity",0).attr("class","tooltip").style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","10px")}},{key:"initiateBars",value:function(){var e=this.xScale(),a=this.yScale();this.createColorRange();this.svg.append("g").selectAll("g").data(this.MONTHS).enter().append("g").attr("fill","#ffffff").attr("x",function(t){return e(t)}).attr("y",function(t){return a(0)}).attr("height",function(t){return a(0)}).attr("width",e.bandwidth())}},{key:"setup",value:function(){this.width=1350,this.height=350,this.svg.attr("viewBox","0 0 ".concat(this.width," ").concat(this.height)),this.initiateBars()}},{key:"updateData",value:function(){var t=this.createStackedData(),e=(this.currentData.columns.slice(1),this.createColorRange()),a=d3.transition().duration(2e3),n=this.xScale(),i=this.yScale();this.createXaxis(),this.createYaxis();var r=d3.select("div#busiest-month");this.createTooltips();this.svg.append("g").selectAll("g").data(t).enter().append("g").attr("fill",function(t){return e(t.key)}).selectAll("rect").data(function(t){return t}).enter().append("rect").attr("x",function(t){return n(t.data.month)}).attr("y",function(t){return i(this.height)}).attr("height",function(t){return i(0)}).attr("width",n.bandwidth()).on("mouseover",function(t){var e=d3.select(this.parentNode).datum().key,t=t.data[e];r.html(e+"<br>Count: "+t).style("color","black").transition().duration(2100).style("opacity",1)}).on("mousemove",function(t){var e=d3.event.x,a=d3.event.y;r.style("left",e+10+"px").style("top",a+"px").style("opacity",0)}).on("mouseleave",function(t){r.style("opacity",0)}).transition(a).attr("y",function(t){return i(t[1])}).attr("height",function(t){return i(t[0])-i(t[1])})}}]),e}();function instentiateBusiestMonth(e,t){var a={},n=new BusiestMonthStackedBarPlot(e);d3.csv(t).then(function(t){(a=t).forEach(function(t){return t.total=parseInt(t.movie)+parseInt(t.show)}),e.style("opacity",0),e.transition().delay(10).duration(600).style("opacity",1),n.currentData=a,n.MONTHS=d3.map(a,function(t){return t.month}).keys(),n.updateData()})}
//# sourceMappingURL=busiest_month_bar.js.map
