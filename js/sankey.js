"use strict";d3.sankey=function(){var t={},u=24,c=8,i=[1,1],e=[],o=[];function r(){e.forEach(function(n){var t=0,r=0;n.sourceLinks.forEach(function(n){n.sy=t,t+=n.dy}),n.targetLinks.forEach(function(n){n.ty=r,r+=n.dy})})}function f(n){return n.y+n.dy/2}function a(n){return n.value}return t.nodeWidth=function(n){return arguments.length?(u=+n,t):u},t.nodePadding=function(n){return arguments.length?(c=+n,t):c},t.nodes=function(n){return arguments.length?(e=n,t):e},t.links=function(n){return arguments.length?(o=n,t):o},t.size=function(n){return arguments.length?(i=n,t):i},t.layout=function(n){return e.forEach(function(n){n.sourceLinks=[],n.targetLinks=[]}),o.forEach(function(n){var t=n.source,r=n.target;"number"==typeof t&&(t=n.source=e[n.source]),"number"==typeof r&&(r=n.target=e[n.target]),t.sourceLinks.push(n),r.targetLinks.push(n)}),e.forEach(function(n){n.value=Math.max(d3.sum(n.sourceLinks,a),d3.sum(n.targetLinks,a))}),function(){var t,n=e,r=0;for(;n.length;)t=[],n.forEach(function(n){n.x=r,n.dx=u,n.sourceLinks.forEach(function(n){t.indexOf(n.target)<0&&t.push(n.target)})}),n=t,++r;(function(t){e.forEach(function(n){n.sourceLinks.length||(n.x=t-1)})})(r),function(t){e.forEach(function(n){n.x*=t})}((i[0]-u)/(r-1))}(),function(n){var t=d3.nest().key(function(n){return n.x}).entries(e).map(function(n){return n.values});(function(){var r=d3.min(t,function(n){return(i[1]-(n.length-1)*c)/d3.sum(n,a)});t.forEach(function(n){n.forEach(function(n,t){n.y=t,n.dy=n.value*r})}),o.forEach(function(n){n.dy=n.value*r})})(),u();for(var r=1;0<n;--n)!function(r){function u(n){return f(n.target)*n.value}t.slice().reverse().forEach(function(n){n.forEach(function(n){var t;n.sourceLinks.length&&(t=d3.sum(n.sourceLinks,u)/d3.sum(n.sourceLinks,a),n.y+=(t-f(n))*r)})})}(r*=.99),u(),function(r){function u(n){return f(n.source)*n.value}t.forEach(function(n,t){n.forEach(function(n){var t;n.targetLinks.length&&(t=d3.sum(n.targetLinks,u)/d3.sum(n.targetLinks,a),n.y+=(t-f(n))*r)})})}(r),u();function u(){t.forEach(function(n){for(var t,r,u=0,e=n.length,o=0;o<e;++o)0<(r=u-(t=n[o]).y)&&(t.y+=r),u=t.y+t.dy+c;if(0<(r=u-c-i[1]))for(u=t.y-=r,o=e-2;0<=o;--o)0<(r=(t=n[o]).y+t.dy+c-u)&&(t.y-=r),u=t.y})}}(n),r(),t},t.relayout=function(){return r(),t},t.link=function(){var c=.5;function t(n){var t=n.source.x+n.source.dx,r=n.target.x,u=d3.interpolateNumber(t,r),e=u(c),o=u(1-c),u=n.source.y+n.sy+n.dy/2,n=n.target.y+n.ty+n.dy/2;return"M"+t+","+u+"C"+e+","+u+" "+o+","+n+" "+r+","+n}return t.curvature=function(n){return arguments.length?(c=+n,t):c},t},t};
//# sourceMappingURL=sankey.js.map
